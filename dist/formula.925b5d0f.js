(()=>{function t(t,e,r,l){Object.defineProperty(t,e,{get:r,set:l,enumerable:!0,configurable:!0})}var e=globalThis.parcelRequire60dc,r=e.register;r("k7Fc5",function(r,l){t(r.exports,"initSciencePage",()=>y),t(r.exports,"cleanupSciencePage",()=>p);var a=e("2bvox"),i=e("hR2D0"),n=e("gkx87"),o=e("64aKy");a.gsap.registerPlugin(i.ScrollTrigger,n.SplitText);let c=null,s=null,h=null,u=null,d=null;function y(){try{!function(){let t=document.querySelector(".venn-shell");if(!t)return console.warn(".venn-shell not found â€” skipping venn init");let e=t.getBoundingClientRect(),r=Math.max(300,Math.round(e.width)),l=Math.max(200,Math.round(e.height)),i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg");o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("viewBox",`0 0 ${r} ${l}`),o.style.position="absolute",o.style.left="0",o.style.top="0",o.style.zIndex="2",o.style.pointerEvents="none",o.style.overflow="visible";let y=document.createElementNS(i,"circle"),p=document.createElementNS(i,"circle"),g=Math.round(.12*r),m=Math.round(.88*r),b=Math.round(.5*l),x=Math.round(.85*Math.round(.38*Math.min(r,l)));y.setAttribute("cx",g),y.setAttribute("cy",b),y.setAttribute("r",x);let k=window.getComputedStyle(t).backgroundColor||window.getComputedStyle(document.body).backgroundColor||"rgb(255,255,255)",M=(t=>{try{let e=t.replace(/[^0-9.,]/g,"").split(",").map(t=>parseFloat(t)),r=e[0]||255,l=e[1]||255,a=e[2]||255;if((.2126*r+.7152*l+.0722*a)/255<.5)return{fill:"rgba(255,255,255,0.06)",stroke:"#ffffff",lensFill:"rgba(255,255,255,0.08)",strokeDash:"1 7",strokeW:2};return{fill:"rgba(0,100,255,0.12)",stroke:"#ffffff",lensFill:"rgba(255,0,0,0.12)",strokeDash:"1 7",strokeW:2}}catch(t){return{fill:"rgba(0,100,255,0.12)",stroke:"#0366d6",lensFill:"rgba(255,0,0,0.12)",strokeDash:"6 6",strokeW:2}}})(k);y.setAttribute("fill","none"),y.setAttribute("stroke",M.stroke),y.setAttribute("stroke-dasharray",M.strokeDash),y.setAttribute("stroke-width",M.strokeW),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-opacity","0.8"),p.setAttribute("cx",m),p.setAttribute("cy",b),p.setAttribute("r",x),p.setAttribute("fill","none"),p.setAttribute("stroke",M.stroke),p.setAttribute("stroke-dasharray",M.strokeDash),p.setAttribute("stroke-width",M.strokeW),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-opacity","0.8"),o.appendChild(y),o.appendChild(p);let w=document.createElementNS(i,"defs"),v=document.createElementNS(i,"clipPath");v.setAttribute("id","venn-clip"),v.setAttribute("clipPathUnits","userSpaceOnUse");let A=document.createElementNS(i,"path");A.setAttribute("d",""),A.setAttribute("fill",M.lensFill||"rgba(255,0,0,0.12)"),v.appendChild(A),w.appendChild(v);let S=document.createElementNS(i,"mask");S.setAttribute("id","venn-mask"),S.setAttribute("maskUnits","userSpaceOnUse");let C=document.createElementNS(i,"rect");C.setAttribute("x","0"),C.setAttribute("y","0"),C.setAttribute("width",String(r)),C.setAttribute("height",String(l)),C.setAttribute("fill","#000");let P=document.createElementNS(i,"path");P.setAttribute("d",""),P.setAttribute("fill","#fff"),S.appendChild(C),S.appendChild(P),w.appendChild(S),o.appendChild(w);let $=window.getComputedStyle(t).position;if("static"===$||!$)try{t.style.position="relative"}catch(t){}t.appendChild(o),c=o;let T=null,E=null;try{T=t.querySelector(".venn-txt-shell-left"),E=t.querySelector(".venn-txt-shell-right"),[T,E].forEach(t=>{if(t)try{t.style.position=t.style.position||"absolute",t.style.transform=t.style.transform||"translate(-50%,-50%)",t.style.pointerEvents="none",t.style.zIndex=t.style.zIndex||"3"}catch(t){}})}catch(t){}try{let e=document.querySelector("video");if(e&&!e.closest(".venn-shell")){let r=e.cloneNode(!0);try{r.muted=!0}catch(t){}try{r.setAttribute("muted","")}catch(t){}try{r.autoplay=!0}catch(t){}try{r.setAttribute("autoplay","")}catch(t){}try{r.loop=!0}catch(t){}try{r.setAttribute("loop","")}catch(t){}try{r.playsInline=!0}catch(t){}try{r.setAttribute("playsinline","")}catch(t){}try{r.setAttribute("preload","auto")}catch(t){}r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.width="100%",r.style.height="100%",r.style.objectFit="cover",r.style.zIndex="1",r.style.pointerEvents="none",r.style.opacity="1";try{t.insertBefore(r,o)}catch(e){t.appendChild(r)}try{let t=r.play();t&&t.catch&&t.catch(()=>{})}catch(t){}h=r;try{let t=e.play();t&&t.catch&&t.catch(()=>{try{e.muted=!0,e.setAttribute("muted","")}catch(t){}try{e.play().catch(()=>{})}catch(t){}})}catch(t){}try{let t=r.play();t&&t.catch&&t.catch(()=>{})}catch(t){}let l=t=>{try{t.play().catch(()=>{})}catch(t){}};document.addEventListener("click",()=>{try{l(e),l(r)}catch(t){}},{once:!0})}}catch(t){}try{let e=t.querySelector("video");if(e){let a=document.createElement("canvas");a.width=r,a.height=l,a.style.position="absolute",a.style.left="0",a.style.top="0",a.style.width="100%",a.style.height="100%",a.style.zIndex="1",a.style.pointerEvents="none";try{t.insertBefore(a,o)}catch(e){t.appendChild(a)}u=a;let i=a.getContext("2d");try{let t=e.play();t&&t.catch&&t.catch(()=>{try{e.muted=!0,e.setAttribute("muted","")}catch(t){}try{e.play().catch(()=>{})}catch(t){}})}catch(t){}document.addEventListener("click",()=>{try{e.play().catch(()=>{})}catch(t){}},{once:!0});let n=()=>{try{if(e&&e.readyState>=2){i.clearRect(0,0,a.width,a.height);let t=e.videoWidth||e.clientWidth||a.width,r=e.videoHeight||e.clientHeight||a.height,l=.75;try{let t=f(F.lx,F.cy,F.lr,F.rx,F.cy,F.rr,28);if(t&&t.length){let e=1/0,r=1/0,i=-1/0,n=-1/0;for(let l of t)l.x<e&&(e=l.x),l.y<r&&(r=l.y),l.x>i&&(i=l.x),l.y>n&&(n=l.y);let o=Math.max(1,i-e),c=Math.max(1,n-r),s=o/a.width,h=c/a.height,u=Math.max(s,h);l=Math.min(1,1.03*u),l=Math.max(l,.2)}}catch(t){l=.75}let n=Math.round(a.width*l),o=Math.round(a.height*l),c=Math.round((a.width-n)/2),s=Math.round((a.height-o)/2);try{i.drawImage(e,0,0,t,r,c,s,n,o)}catch(t){try{i.drawImage(e,c,s,n,o)}catch(t){}}}}catch(t){}d=requestAnimationFrame(n)};d=requestAnimationFrame(n)}}catch(t){}let q=a.gsap.timeline({scrollTrigger:{trigger:t,start:"top top",end:"+=100%",pin:!0,scrub:.6,markers:!1}}),F={lx:g,rx:m,cy:b,lr:x,rr:x},I=()=>{try{y.setAttribute("cx",Math.round(F.lx)),y.setAttribute("cy",Math.round(F.cy)),y.setAttribute("r",Math.round(F.lr)),p.setAttribute("cx",Math.round(F.rx)),p.setAttribute("cy",Math.round(F.cy)),p.setAttribute("r",Math.round(F.rr));try{T&&(T.style.left=`${(F.lx/r*100).toFixed(4)}%`,T.style.top=`${(F.cy/l*100).toFixed(4)}%`),E&&(E.style.left=`${(F.rx/r*100).toFixed(4)}%`,E.style.top=`${(F.cy/l*100).toFixed(4)}%`)}catch(t){}let t=Math.max(0,F.lr-(M&&M.strokeW?M.strokeW:2)/2-2),e=Math.max(0,F.rr-(M&&M.strokeW?M.strokeW:2)/2-2),a=function(t,e,r,l,a,i){let n=l-t,o=a-e,c=Math.hypot(n,o);if(c<=1e-4||c>=r+i)return"";if(c<=Math.abs(r-i)){var s,h,u;let n=Math.min(r,i);return s=r<i?t:l,h=r<i?e:a,u=n,`M ${s-u} ${h} a ${u} ${u} 0 1 0 ${2*u} 0 a ${u} ${u} 0 1 0 ${-(2*u)} 0 Z`}let d=(r*r-i*i+c*c)/(2*c),y=Math.sqrt(Math.max(0,r*r-d*d)),p=t+d*n/c,f=e+d*o/c,g=-(y/c*o),m=y/c*n,b=p+g,x=f+m;return`M ${b} ${x} A ${r} ${r} 0 0 1 ${p-g} ${f-m} A ${i} ${i} 0 0 1 ${b} ${x} Z`}(F.lx,F.cy,t,F.rx,F.cy,e);A.setAttribute("d",a||"");let i=document.querySelector(".venn-video-shell"),n=i?i.querySelector("video"):null,o=u||(t=>{if(!t)return null;let e=t.querySelector("video");if(e)return e;try{let e=getComputedStyle(t);if(e&&e.backgroundImage&&"none"!==e.backgroundImage)return t}catch(t){}let r=t.querySelectorAll("*");for(let t=0;t<r.length;t++)try{let e=r[t],l=getComputedStyle(e);if(l&&l.backgroundImage&&"none"!==l.backgroundImage)return e}catch(t){}return t})(i)||i,c="#venn-clip",s=`url(${c})`,h=(()=>{try{return`url(${location.href.replace(/#.*$/,"")}${c})`}catch(t){return s}})();o&&(t=>{try{t.style.clipPath=h,t.style.webkitClipPath=h,t.style.clipPath=t.style.clipPath||s,t.style.webkitClipPath=t.style.webkitClipPath||s,t.style.overflow="hidden"}catch(t){}})(o);try{let t=A.getAttribute("d")||"";try{P.setAttribute("d",t||"")}catch(t){}if(t){let e=`path('${t.replace(/'/g,"\\'")}')`;if(i)try{i.style.clipPath=e,i.style.webkitClipPath=e}catch(t){}if(n)try{n.style.clipPath=e,n.style.webkitClipPath=e}catch(t){}}}catch(t){}try{let t=Math.max(0,F.lr-(M&&M.strokeW?M.strokeW:2)/2-2),e=Math.max(0,F.rr-(M&&M.strokeW?M.strokeW:2)/2-2),a=f(F.lx,F.cy,t,F.rx,F.cy,e,24);if(a&&a.length){let t=a.map(t=>`${(t.x/r*100).toFixed(3)}% ${(t.y/l*100).toFixed(3)}%`).join(", ");try{o.style.clipPath=`polygon(${t})`,o.style.webkitClipPath=`polygon(${t})`}catch(t){}}}catch(t){}try{let t=`url(${location.href.replace(/#.*$/,"")}#venn-mask)`;if(i)try{i.style.mask=t,i.style.webkitMask=t}catch(t){}if(n)try{n.style.mask=t,n.style.webkitMask=t}catch(t){}}catch(t){}try{!1}catch(t){}}catch(t){}},N=1.56*x,W=r/2,L=Math.round(W-N/2),R=Math.round(W+N/2);q.to(F,{lx:L,duration:1.2,ease:"power2.out",onUpdate:I},0),q.to(F,{rx:R,duration:1.2,ease:"power2.out",onUpdate:I},0);try{let e=t.querySelector(".venn-vid-txt");if(e){try{a.gsap.set(e,{filter:"blur(20px)",opacity:0,willChange:"filter,opacity"})}catch(t){}let t=m-g,r=R-L,l=F.lr+F.rr;if(Math.abs(r-t)>1e-4){let a=(l-t)/(r-t);a=Math.max(0,Math.min(1,a));let i=q.duration()||1.2,n=a*i-.45*i;n=Math.max(0,n);let o=Math.max(.001,i-n);try{q.fromTo(e,{filter:"blur(20px)",opacity:0},{filter:"blur(0px)",opacity:1,duration:o,ease:"none"},n)}catch(t){}}}}catch(t){}try{let e=t.querySelectorAll(".venn-sub-txt");if(e.length>0){let t=q.duration()||1.2,r=+t,l=.4*t;e.forEach(t=>{let e=new(0,n.SplitText)(t,{type:"words"});a.gsap.set(e.words,{opacity:0,filter:"blur(10px)",y:15}),q.to(e.words,{opacity:1,filter:"blur(0px)",y:0,duration:l,stagger:.09,ease:"power2.out"},r)}),q.scrollTrigger&&(q.scrollTrigger.vars.end="+=200%",q.scrollTrigger.refresh())}}catch(t){console.error("Error setting up venn-sub-txt animation:",t)}I(),s=q}()}catch(t){console.error("Failed to init venn circles:",t)}try{let t=[];document.querySelectorAll(".home-project-scroll-txt-shell, .science-scroll-txt-shell").forEach((e,r)=>{let l=e.querySelectorAll(".home-project-txt, .science-project-txt, [data-ticker-item]");if(!l||0===l.length){let t=Array.from(e.children||[]).filter(t=>{try{let e=(t.tagName||"").toLowerCase();if("script"===e||"svg"===e||"canvas"===e)return!1;return(t.textContent||"").trim().length>0||t.querySelector&&t.querySelector("img,svg")}catch(t){return!1}});t.length&&(l=t)}if(!l||0===l.length){try{console.debug("[formula] no ticker items found in shell:",e)}catch(t){}return}let n=function(t,e,r=1){let l,n=(0,o.default)(t,{repeat:-1,speed:1.2,reversed:r<0}),c=Math.abs(1.2);n.timeScale(c);let s=r,h=()=>{a.gsap.killTweensOf(n),n.pause()},u=()=>{n.resume(),n.timeScale(c)},d=i.ScrollTrigger.create({trigger:e,start:"top+=20% bottom",end:"bottom-=20% top",onUpdate:({isActive:t,getVelocity:e})=>{if(!t)return void h();a.gsap.killTweensOf(n);let i=e();if(Math.abs(i)>.5){let t=Math.sign(i),e=r<0?-t:t;s=e;let l=c+Math.abs(e)*Math.min(Math.abs(.005*i),8);n.timeScale(l*Math.sign(e))}clearTimeout(l),l=setTimeout(()=>{a.gsap.to(n,{timeScale:c*Math.sign(s),duration:.5,ease:"power1.out",overwrite:!0})},150)},onLeave:h,onEnter:u,onLeaveBack:h,onEnterBack:u});return()=>{clearTimeout(l);try{d&&d.kill&&d.kill()}catch(t){}a.gsap.killTweensOf(n);try{n.kill&&n.kill()}catch(t){}}}(l,e,r%2==0?1:-1);"function"==typeof n&&t.push(n)}),window._scienceTickerCleanup=()=>{try{t.forEach(t=>{try{t()}catch(t){}})}catch(t){}}}catch(t){}}function p(){try{if(s){try{s.scrollTrigger&&s.scrollTrigger.kill()}catch(t){}try{s.kill()}catch(t){}s=null}if(c&&c.parentNode&&(c.parentNode.removeChild(c),c=null),h&&h.parentNode){try{h.parentNode.removeChild(h)}catch(t){}h=null}if(u){try{cancelAnimationFrame(d)}catch(t){}try{u.parentNode&&u.parentNode.removeChild(u)}catch(t){}u=null,d=null}}catch(t){console.warn("cleanupSciencePage failed",t)}try{if("function"==typeof window._scienceTickerCleanup){try{window._scienceTickerCleanup()}catch(t){}window._scienceTickerCleanup=null}}catch(t){}}function f(t,e,r,l,a,i,n=24){let o=l-t,c=a-e,s=Math.hypot(o,c);if(s<=1e-4||s>=r+i)return[];if(s<=Math.abs(r-i)){let o=Math.min(r,i),c=r<i?t:l,s=r<i?e:a,h=[];for(let t=0;t<n;t++){let e=t/n*Math.PI*2;h.push({x:c+Math.cos(e)*o,y:s+Math.sin(e)*o})}return h}let h=(r*r-i*i+s*s)/(2*s),u=Math.sqrt(Math.max(0,r*r-h*h)),d=t+h*o/s,y=e+h*c/s,p=-(u/s*c),m=u/s*o,b=d+p,x=y+m,k=d-p,M=y-m,w=Math.atan2(x-e,b-t),v=Math.atan2(M-e,k-t),A=Math.atan2(M-a,k-l),S=Math.atan2(x-a,b-l),C=[],P=Math.ceil(n/2);for(let l=0;l<=P;l++){let a=l/P,i=w+g(w,v)*a;C.push({x:t+Math.cos(i)*r,y:e+Math.sin(i)*r})}for(let t=0;t<=P;t++){let e=t/P,r=A+g(A,S)*e;C.push({x:l+Math.cos(r)*i,y:a+Math.sin(r)*i})}return C}function g(t,e){let r=e-t;for(;r<-Math.PI;)r+=2*Math.PI;for(;r>Math.PI;)r-=2*Math.PI;return r}window.initPageTransitions=function(){}}),r("64aKy",function(r,l){t(r.exports,"default",()=>i);var a=e("2bvox");function i(t,e){t=a.default.utils.toArray(t),e=e||{};let r=a.default.timeline({repeat:e.repeat,paused:e.paused,defaults:{ease:"none"},onReverseComplete:()=>r.totalTime(r.rawTime()+100*r.duration())}),l=t.length,i=t[0].offsetLeft,n=[],o=[],c=[],s=0,h=100*(e.speed||1),u=!1===e.snap?t=>t:a.default.utils.snap(e.snap||1),d,y,p,f,g,m;for(a.default.set(t,{xPercent:(t,e)=>{let r=o[t]=parseFloat(a.default.getProperty(e,"width","px"));return c[t]=u(parseFloat(a.default.getProperty(e,"x","px"))/r*100+a.default.getProperty(e,"xPercent")),c[t]}}),a.default.set(t,{x:0}),d=t[l-1].offsetLeft+c[l-1]/100*o[l-1]-i+t[l-1].offsetWidth*a.default.getProperty(t[l-1],"scaleX")+(parseFloat(e.paddingRight)||0),m=0;m<l;m++)g=t[m],y=c[m]/100*o[m],f=(p=g.offsetLeft+y-i)+o[m]*a.default.getProperty(g,"scaleX"),r.to(g,{xPercent:u((y-f)/o[m]*100),duration:f/h},0).fromTo(g,{xPercent:u((y-f+d)/o[m]*100)},{xPercent:c[m],duration:(y-f+d-y)/h,immediateRender:!1},f/h).add("label"+m,p/h),n[m]=p/h;function b(t,e){e=e||{},Math.abs(t-s)>l/2&&(t+=t>s?-l:l);let i=a.default.utils.wrap(0,l,t),o=n[i];return o>r.time()!=t>s&&(e.modifiers={time:a.default.utils.wrap(0,r.duration())},o+=r.duration()*(t>s?1:-1)),s=i,e.overwrite=!0,r.tweenTo(o,e)}return r.next=t=>b(s+1,t),r.previous=t=>b(s-1,t),r.current=()=>s,r.toIndex=(t,e)=>b(t,e),r.times=n,r.progress(1,!0).progress(0,!0),e.reversed&&(r.vars.onReverseComplete(),r.reverse()),r}})})();
//# sourceMappingURL=formula.925b5d0f.js.map
